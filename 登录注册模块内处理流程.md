# 6.1.2 模块内处理流程

## 1. 用户进入登录界面

用户点击网站导航栏的"登录"按钮，系统弹出登录抽屉组件。用户可以选择登录、注册或忘记密码功能。如有账号，则输入用户名和密码进行登录。如没有账号，则点击"注册新账号"进入账号注册界面，输入用户名（不能重复）、邮箱、性别、密码进行注册，注册成功后，返回登录界面。

## 2. 信息验证

系统验证用户信息是否正确，如果输入信息不合规范，则提示正确的格式，如符合规范且用户账号正常，登录成功。注册时系统会检查用户名和邮箱是否已被占用，如果已被占用则提示相应错误信息。

## 3. 登录流程处理

用户输入用户名和密码后，系统调用后端API `/api/usersLogin/userLogin` 进行身份验证。验证成功后，系统将用户信息存储到localStorage中，触发用户登录状态变化事件，关闭登录抽屉，并跳转到主页面。

## 4. 注册流程处理

用户填写注册信息（用户名、邮箱、性别、密码）后，系统调用后端API `/api/usersLogin/userRegister` 进行用户注册。系统会检查用户名和邮箱的唯一性，注册成功后显示成功提示，2秒后自动返回登录界面。

## 5. 忘记密码流程处理

用户点击"忘记密码？"进入忘记密码界面，输入用户名和邮箱后，系统调用API `/api/usersLogin/getCode` 发送验证码到用户邮箱。验证码发送成功后，系统自动跳转到重置密码界面，用户输入验证码和新密码，系统调用API `/api/usersLogin/resetPassword` 完成密码重置。

## 6. 错误处理机制

系统对网络错误、服务器连接失败、数据格式错误等异常情况进行统一处理，向用户显示友好的错误提示信息。对于重复注册、用户名邮箱占用等情况，系统会显示具体的错误原因。

## 7. 用户状态管理

登录成功后，系统通过userManager工具类管理用户状态，包括用户信息的本地存储、用户ID的获取和缓存、登录状态的检查等功能。系统支持新旧两种用户信息格式的兼容处理。

---

**2025-1-20**  
**内部公开，未经许可不得扩散**  
**第1页，共1页**

---

**软通教育**  
**ISOFTSTONE EDUCATION**

---

**软通教育 软件设计说明书**  
**内部公开**
